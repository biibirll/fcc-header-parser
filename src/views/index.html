<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>FCC Header Parser</title>

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
      crossorigin="anonymous"
    ></script>
  </head>
  <body>
    <div class="container">
      <main>
        <h1 class="text-center">FCC Header parser</h1>

        <p>
          This project is a header parser that returns relevant data about the
          requesting client. The project was designed as a solution to
          FreeCodeCamp's
          <a
            href="https://www.freecodecamp.org/learn/back-end-development-and-apis/#back-end-development-and-apis-projects"
            >Back End Development and APIs Certification</a
          >.
        </p>

        <p>
          The header parser has only one endpoint, <code>>/api/whoami</code>,
          which returns a JSON response containing the following data:
        </p>

        <ul>
          <li>
            ipaddress: a string representing the requesting client's IP address.
          </li>
          <li>
            language: a string representing one or more preferred languages sent
            by the client in the request headers, as defined in
            <a
              href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Accept-Language"
              >MDN's documentation on Accept-Language header field</a
            >.
          </li>
          <li>
            software: a string representing the client's user agent, defined in
            the User-Agent field.
          </li>
        </ul>

        <h2 class="text-center">Your info</h2>

        <div id="data-container"></div>
      </main>
    </div>

    <script>
      let container = document.getElementById("data-container");
      let dataList = document.createElement("ul");

      fetch("/api/whoami")
        .then((res) => res.json())
        .then((json) => {
          Object.keys(json).forEach((key) => {
            let li = document.createElement("li");
            li.innerHTML = `${key}: ${json[key]}`;
            dataList.append(li);
          });
        });

      container.append(dataList);
    </script>
  </body>
</html>
